---
layout: post
title:  "一分钟读论文：《ChatGPT for Robotics：设计原则和模型能力》"
author: unbug
categories: [AI, Engineering]
image: assets/images/screenshot-20230407-153513.jpg
tags: [ChatGPT, Robotics]
---
微软自主系统和机器人研究院和 ChatGPT 合著的论文[《ChatGPT for Robotics: Design Principles and Model Abilities》][paper1-url]，发现：

-   ChatGPT是一个基于大规模文本和人类交互数据训练的语言模型，可以生成与各种提示和问题相关的连贯和语法正确的回答。
-   ChatGPT可以通过一系列的设计原则来指导其解决机器人学任务，包括特殊的提示结构、高级API和文本反馈等。
-   ChatGPT可以适应不同的机器人学任务、仿真器和形态，例如空中导航、操纵和具身代理等，并且可以通过自然语言指令来与用户交互。
-   ChatGPT可以利用自由形式的对话、解析XML标签和生成代码等能力，以及使用任务特定的提示函数和通过对话进行闭环推理等策略，来提高其在机器人学领域的表现。
-   该论文还介绍了一个开源的研究工具 PromptCraft，它包含了一个平台，让研究者可以协作地上传和投票评价机器人学应用中的优秀提示方案，以及一个带有ChatGPT集成的机器人学仿真器样例，让用户更容易地开始使用ChatGPT进行机器人学研究

##  ChatGPT 解决机器人问题的能力

-   Zero-shot task planning，即让ChatGPT可以在没有任何先验知识或训练的情况下，根据用户的指令和提示语，生成有效和正确的机器人控制代码或行为。这种能力的特点是可以让ChatGPT适应不同的机器人学任务、仿真器和形态，而不需要进行特定的微调或训练。这种能力的优点是可以让用户通过自然语言指令来控制机器人，而不需要学习复杂的编程语言或了解机器人系统的细节。这种能力的缺点是可能会生成一些错误或不安全的代码或行为，因为ChatGPT没有足够的物理世界的知识或约束。这种能力的适用场景是一些简单或常见的机器人学任务，例如移动、抓取、激活等。这种能力的使用方法是在提示语中提供一些信息和约束，来引导ChatGPT生成有效和正确的代码或行为。
-   User on the loop: interactive conversations for complex tasks，即让用户通过对话的方式，与ChatGPT进行交互，提供高级的指令和反馈，从而实现复杂的机器人学任务。这种能力的特点是可以让用户更容易地控制机器人，而不需要学习复杂的编程语言或了解机器人系统的细节。这种能力的优点是可以让ChatGPT通过用户的反馈，实现闭环推理和自适应学习，从而提高其在机器人学领域的表现。这种能力的缺点是可能会受到用户反馈的质量和一致性的影响，以及对话过程中的歧义和误解的影响。这种能力的适用场景是一些复杂或不常见的机器人学任务，例如导航、操作、体现等。这种能力的使用方法是在提示语中提供一些信息和约束，来引导ChatGPT理解和执行任务，并在对话中给予及时和有效的反馈。
-   Perception-action loops，即让ChatGPT可以利用机器人的感知能力，例如视觉、触觉、声音等，来获取环境中的信息，例如物体的位置、形状、颜色等，并根据这些信息来生成相应的行为，例如移动、抓取、激活等。这种能力的特点是可以让ChatGPT更好地理解和适应物理世界的变化，而不需要用户提供过多的信息或指示。这种能力的优点是可以让ChatGPT更灵活地处理不同的场景和任务，而不需要预先定义固定的规则或策略。这种能力的缺点是可能会受到机器人感知能力的限制和噪声。
-   Reasoning and common-sense robotics tasks，即让ChatGPT可以利用其在文本领域的知识和推理能力，来解决一些基本的逻辑、几何和数学问题，以及一些需要常识的机器人学问题。这种能力的特点是可以让ChatGPT更好地利用其在文本领域的知识和推理能力，来解决一些需要抽象思维和常识的机器人学问题，而不需要用户提供过多的信息或指示。这种能力的优点是可以让ChatGPT更灵活地处理不同的场景和任务，而不需要预先定义固定的规则或策略。这种能力的缺点是可能会受到ChatGPT在文本领域的知识和推理能力的限制和误差的影响，以及生成回答的正确性和安全性的影响。这种能力的适用场景是一些需要逻辑、几何和数学推理，或者需要常识判断的机器人学问题，例如计算面积、判断方向、选择合适的工具等。这种能力的使用方法是在提示语中提供一些信息和约束，来引导ChatGPT理解和解决问题，并在对话中给予及时和有效的反馈。

## ChatGPT 应用于机器人的设计原则
-   使用自由形式的对话，即让ChatGPT可以通过自然语言指令和反馈来与用户交互，而不需要遵循固定的语法或格式。这种设计原则的目的是让用户更容易地控制机器人，而不需要学习复杂的编程语言或了解机器人系统的细节。
-   解析XML标签，即让ChatGPT可以识别和处理一些特殊的提示结构，例如XML标签、注释、缩进等，来增加其注意力和理解能力，以及提高其生成代码的质量和一致性。这种设计原则的目的是让ChatGPT更好地利用其在文本领域的知识和推理能力，来解决一些基本的逻辑、几何和数学问题，以及一些需要常识的机器人学问题。
-   生成代码，即让ChatGPT可以根据用户的指令和提示语，生成有效和正确的机器人控制代码，例如Python或C++等。这种设计原则的目的是让ChatGPT适应不同的机器人学任务、仿真器和形态，而不需要进行特定的微调或训练。
-   使用任务特定的提示函数，即针对不同的机器人学任务，设计合适的提示语句和格式，来引导ChatGPT生成有效和正确的代码或行为，以及提供必要的信息和约束。这种设计原则的目的是让ChatGPT更好地理解和解决一些需要抽象思维和常识的机器人学问题，而不需要用户提供过多的信息或指示。
-   通过对话进行闭环推理，即让ChatGPT可以根据用户的反馈来调整其生成的代码或行为，从而实现自适应学习和改进。这种设计原则的目的是让ChatGPT通过用户的反馈，实现闭环推理和自适应学习，从而提高其在机器人学领域的表现。

## ChatGPT 应用于机器人的 Pipeline

![]({{ site.baseurl }}/assets/images/screenshot-20230407-153622.jpg)

-   第一步，我们定义一个高级的机器人函数库。这个库可以针对特定的机器人形态或场景，应该能够映射到机器人平台上的实际实现，同时命名足够描述性，让ChatGPT能够理解；
-   第二步，我们为ChatGPT构建一个提示语，描述任务的目标，同时指定允许使用的高级函数库中的函数。提示语也可以包含一些约束条件，或者指示ChatGPT如何组织其回应；
-   第三步，用户保持在循环中，评估ChatGPT生成的代码，可以通过直接分析或者模拟的方式，同时向ChatGPT提供关于代码质量和安全性的反馈；
-   第四步，在对ChatGPT生成的实现进行迭代后，最终的代码可以部署到机器人上。

假设我们要使用 ChatGPT 来控制一个无人机，让它在空中飞行一个正方形的轨迹。这个 Pipeline 的执行步骤如下：
-   第一步，我们定义一个高级的无人机函数库。这个库包含了一些常用的无人机控制函数，例如`“take_off()”、“land()”、“move_forward(distance)”`等，它们可以映射到无人机平台上的实际实现，同时命名足够描述性，让ChatGPT能够理解；
-   第二步，我们为ChatGPT构建一个提示语，描述任务的目标，同时指定允许使用的高级函数库中的函数。提示语也可以包含一些约束条件，或者指示ChatGPT如何组织其回应。例如：
```
    # This is a prompt for ChatGPT to generate code for a drone to fly a square trajectory in the air
    # You can use the following high-level functions from the drone library:
    # take_off(), land(), move_forward(distance), turn_left(angle), turn_right(angle)
    # Please write your code below, using proper indentation and comments
```
    

-   第三步，用户保持在循环中，评估ChatGPT生成的代码，可以通过直接分析或者模拟的方式，同时向ChatGPT提供关于代码质量和安全性的反馈。例如：
```
    # This is a possible code generated by ChatGPT
    
    # Take off from the ground
    take_off()
    
    # Fly a square trajectory with 10 meters per side
    for i in range(4):
      # Move forward 10 meters
      move_forward(10)
      # Turn right 90 degrees
      turn_right(90)
    
    # Land on the ground
    land()
 ```   

-   第四步，在对ChatGPT生成的实现进行迭代后，最终的代码可以部署到无人机上。


## PromptCraft

PromptCraft 是一个开源的研究工具，它有以下几个特性：

-   它包含了一个平台，让研究者可以协作地上传和投票评价机器人学应用中的优秀提示方案，从而形成一个有用的提示库。
-   它提供了一个基于微软AirSim的机器人学仿真器样例，集成了ChatGPT，让用户可以通过自然语言指令来控制不同的机器人平台，例如机械臂、无人机和家庭助理机器人等。
-   它支持使用OpenAI的ChatGPT，也欢迎使用其他的大型语言模型（例如开源的模型或者有API访问权限的模型，如GPT-3和Codex）。
-   它可以帮助用户快速地开始使用ChatGPT进行机器人学研究，也可以帮助用户学习和探索不同的提示技巧和策略

使用 PromptCraft 的方法如下：

-   用户可以从 GitHub 上下载或克隆 PromptCraft-Robotics 仓库，然后按照 README.md文件中的说明安装所需的依赖项和配置环境。
-   用户可以运行`chatgpt_airsim`文件夹中的示例代码，来启动仿真器和 ChatGPT，并通过文本输入框来与机器人交互。
-   用户可以在 Discussions 页面中提交或查看其他用户提交的提示示例，也可以通过 pull request 来添加新的机器人学类别和示例。


## References
- [][links-1]


[paper1-url]: https://www.microsoft.com/en-us/research/uploads/prod/2023/02/ChatGPT___Robotics.pdf
[links-1]: 